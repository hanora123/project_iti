<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Car Rental</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="header"></div>
    <main id="content"></main>
    <div id="footer"></div>

    <script>
      // Function to fetch and insert components
      function includeHTML() {
        // Fetch Header
        fetch("components/header.html")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("header").innerHTML = data;
          });

        // Fetch Footer
        fetch("components/footer.html")
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("footer").innerHTML = data;
          });
      }

      // Function to load content into the layout
      function loadContent(url) {
        fetch(url)
          .then((response) => response.text())
          .then((data) => {
            document.getElementById("content").innerHTML = data;
            // After loading content, we need to re-initialize the scripts for that content
            const scripts = document.getElementById("content").querySelectorAll("script");
            scripts.forEach(oldScript => {
              const newScript = document.createElement("script");
              Array.from(oldScript.attributes).forEach(attr => {
                newScript.setAttribute(attr.name, attr.value);
              });
              newScript.appendChild(document.createTextNode(oldScript.innerHTML));
              oldScript.parentNode.replaceChild(newScript, oldScript);
            });
          });
      }

      // Call the function to include components
      includeHTML();

      // Load the vehicle page by default
      loadContent("vehicle.html");
    </script>
  </body>
</html>
